
  if (estado === "RS" && cidadeUsuario === "rio grande") {
    const dioneiLat = -32.035;
    const dioneiLon = -52.099;
    const dist = haversine(latCliente, lonCliente, dioneiLat, dioneiLon);
    if (dist <= 50) {
      return res.status(200).json({
        reply: `✅ Representante para Rio Grande (RS) e 50km ao redor:\n\n📍 *Dionei*\n📞 WhatsApp: https://wa.me/53532910789\n📏 Distância: ${dist.toFixed(1)} km`,
      });
    }
  }

  if (["RJ", "ES"].includes(estado)) {
    return res.status(200).json({
      reply: `✅ Representante para todo o estado do ${estado}:\n\n📍 *Rafa*\n📞 WhatsApp: https://wa.me/5522992417676`,
    });
  }

  if (estado === "MG") {
    return res.status(200).json({
      reply: `✅ Representante para Minas Gerais:\n\n📍 *Neilson*\n📞 WhatsApp: https://wa.me/5516999774274`,
    });
  }

  if (estado === "PR") {
    const distLoanda = haversine(latCliente, lonCliente, -22.9297, -53.1366); // Loanda-PR
    const cidadesOeste = ["toledo", "cascavel", "foz do iguaçu", "medianeira", "marechal cândido rondon"];

    if (distLoanda <= 200 || cidadesOeste.includes(cidadeUsuario)) {
      return res.status(200).json({
        reply: `✅ Representante para raio de 200km a partir de Loanda (PR) e Oeste do PR:\n\n📍 *Mela*\n📞 WhatsApp: https://wa.me/5544991254963`,
      });
    }

    return res.status(200).json({
      reply: `✅ Representante para Curitiba e demais regiões do Paraná:\n\n📍 *Fabrício*\n📞 WhatsApp: https://wa.me/554788541414`,
    });
  }

  if (estado === "RS" && ["torres", "tramandaí", "terra de areia", "arroio do sal", "são joão do sul", "morrinhos do sul"].includes(cidadeUsuario)) {
    return res.status(200).json({
      reply: `✅ Representante para o Litoral Gaúcho:\n\n📍 *Daniel*\n📞 WhatsApp: https://wa.me/555199987333`,
    });
  }

  if (estado === "RS" && ["porto alegre", "guaíba", "sapucaia do sul", "cachoeirinha"].includes(cidadeUsuario)) {
    return res.status(200).json({
      reply: `✅ Representante para Região Metropolitana de Porto Alegre e Serra Gaúcha:\n\n📍 *Adriano e Reginaldo*\n📞 WhatsApp: https://wa.me/5551991089339`,
    });
  }

  if ((estado === "RS" && ["santa rosa", "ijui", "cruz alta", "são luiz gonzaga", "santo ângelo", "passo fundo", "santa maria"].includes(cidadeUsuario)) ||
      (estado === "SC" && ["chapecó", "palmitos", "pinhalzinho", "são miguel do oeste"].includes(cidadeUsuario))) {
    return res.status(200).json({
      reply: `✅ Representante para Oeste Gaúcho e Extremo Oeste Catarinense:\n\n📍 *Cristian*\n📞 WhatsApp: https://wa.me/555984491079`,
    });
  }

  if (estado === "SC" && ["blumenau", "brusque"].includes(cidadeUsuario)) {
    return res.status(200).json({
      reply: `✅ Representante para Blumenau, Brusque e região:\n\n📍 *Alan*\n📞 WhatsApp: https://wa.me/554799638565`,
    });
  }

  if (estado === "SC" && ["imbituba", "garopaba", "laguna", "tubarão"].includes(cidadeUsuario)) {
    return res.status(200).json({
      reply: `✅ Representante para o Litoral Sul de SC:\n\n📍 *Peterson*\n📞 WhatsApp: https://wa.me/554899658600`,
    });
  }

  if (estado === "SC" && ["balneário camboriú", "itajai", "navegantes", "penha", "itapema", "porto belo", "bombinhas"].includes(cidadeUsuario)) {
    return res.status(200).json({
      reply: `✅ Representante para o Litoral Centro-Norte de SC:\n\n📍 *Diego*\n📞 WhatsApp: https://wa.me/554898445939`,
    });
  }

if (estado === "SP") {
    const litoralSP = [
      "santos", "são vicente", "guarujá", "praia grande", "cubatão", "bertioga",
      "caraguatatuba", "ubatuba", "ilhabela", "mongaguá", "itanhaém", "peruíbe"
    ];

    const interiorSP = [
      "barretos", "franca", "ribeirão preto", "guaira", "batatais", "são joaquim da barra",
      "sertãozinho", "bebedouro", "orlândia", "altinópolis", "jardinópolis"
    ];

    const oesteSP = [
      "santo anastácio", "presidente prudente", "presidente epitácio", "dracena",
      "teodoro sampaio", "mirante do paranapanema"
    ];

    if (litoralSP.includes(cidadeUsuario)) {
      return res.status(200).json({
        reply: `✅ Representante para o Litoral Paulista:\n\n📍 *Marcelo*\n📞 WhatsApp: https://wa.me/5516997774274`
      });
    }

    if (interiorSP.includes(cidadeUsuario)) {
      return res.status(200).json({
        reply: `✅ Representante para o Interior de São Paulo:\n\n📍 *Neilson*\n📞 WhatsApp: https://wa.me/55179981233263`
      });
    }

    if (oesteSP.includes(cidadeUsuario)) {
      return res.status(200).json({
        reply: `✅ Representante para o Oeste Paulista:\n\n📍 *Aguinaldo*\n📞 WhatsApp: https://wa.me/5518996653510`
      });
    }

    return res.status(200).json({
      reply: `✅ Representante para São Paulo:\n\n📍 *Neilson*\n📞 WhatsApp: https://wa.me/55179981233263`
    });
  }
